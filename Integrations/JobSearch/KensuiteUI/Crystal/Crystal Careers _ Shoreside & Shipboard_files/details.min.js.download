"use strict";function _toConsumableArray(i){if(Array.isArray(i)){for(var t=0,e=Array(i.length);t<i.length;t++)e[t]=i[t];return e}return Array.from(i)}!function(i,t){window.Details={isScrolling:!1,initialResize:!0,stickyVars:{},$navbar:i("#stickySubnav"),$mobileStickyCopy:i(".mobile_menu_inlayout"),$mapNav:i(".map_nav"),windowWidth:window.mainVariables.NwindowWidth(),$iteneraryModule:i(".voyage_details_itinerary_map"),initDetails:function(){i(".jsStickySubnav").length>0&&window.mainVariables.clickScrollTo(".jsHeroArrow",i(".jsStickySubnav").offset().top,2e3),this.tripDropdown(),this.mobileTripMenu(),this.mobileDropdown(),this.drawer(),this.customHandlers(),this.historyChange(),this.onScroll(),this.onResize(),this.setFocus()},setFocus:function(){function t(t){var e=13;if(t.keyCode===e)return t.preventDefault&&(t.preventDefault(),i("body").toggleClass("trip_menu_dropdown-appear")),!1}var e=document.getElementById("trip_title_link");e&&(e.addEventListener?e.addEventListener("keydown",t,!1):e.attachEvent&&e.attachEvent("onkeydown",t))},onScroll:function(){var t=this;window.mainVariables.$window.on("scroll",function(){t.stickyNav(i(this))})},onResize:function(){var t=this;window.mainVariables.$window.on("resize",function(){var e=i(window).height(),a=i(".site_header").height(),o=e-a+6;i(".details_hero").css("height",o),setTimeout(function(){t.stickyNavGetSizes(i(this))},100)}).resize()},customHandlers:function(){function t(){a.map(function(i,t){e.updateScene(a[t])})}var e=new ScrollMagic.Controller,a=[{prop:{triggerElement:".site_header",triggerHook:"onLeave",offset:5,reverse:!0},setClassToggle:[".hero_arrow","hide"]},{prop:{triggerElement:".trip_menu",offset:0},setClassToggle:[".title","hide"]},{prop:{triggerElement:".animation_wrap",offset:-250,reverse:!1},setClassToggle:[".animation_wrap","animate"]}];a.map(function(i,t){var o;a[t]=(o=new ScrollMagic.Scene(i.prop)).setClassToggle.apply(o,_toConsumableArray(i.setClassToggle)).addTo(e)}),this.tabNavigation(t);var o=i("#voyage_details_onboard");if(o.length){var n=(i('a[href="#overview"]'),i('a[href="#onboard"]'));i("#overview"),i("#onboard");i(document).on("click",".js_onboard_navigation",function(t){t.preventDefault(),n.click();var e=document.getElementById(i(t.currentTarget).data("href")),a=document.getElementById("onboard").getBoundingClientRect().top,o=e.getBoundingClientRect().top,s=document.getElementsByClassName("details_hero")[0].offsetHeight,r=o-a+s+150;setTimeout(function(){i("html, body").animate({scrollTop:r},10,function(){})},600)})}},mobileTripMenu:function(){this.$body.on("click",".jsDotsItinerary",function(){this.$body.toggleClass("mobile_dropdown_show")}.bind(this))}.bind(window.mainVariables),tripDropdown:function(){i(".jsStickySubnav").on("click",".trip_title_link .itinerary-trip-item",function(i){i.preventDefault(),i.stopPropagation(),this.$body.toggleClass("trip_menu_dropdown-appear")}.bind(window.mainVariables))},mobileDropdown:function(t){i(".mobile_menu_inlayout").html(i(".mobile_dropdown").html()),i(".jsMobileDropdown").on("click","a",function(i){this.$body.removeClass("mobile_dropdown_show trip_menu_dropdown-appear no-overflow")}.bind(window.mainVariables))},drawer:function(){i(".toggle-drawer").on("click",function(t){t.preventDefault(),t.stopPropagation();var e=i(this).closest(".feature_split").find(".feature_drawer"),a=i(this).closest(".feature_split").find(".feature_drawer>div");"block"===e.css("display")?a.animate({opacity:0},500,function(){e.slideUp(600)}):(a.css("opacity",0),e.slideDown(600,function(){a.animate({opacity:1},500)})),window.mainVariables.iconChange(i(this).find("i"),"icon-plus","icon-minus")})},tabNavigation:function(t){var e=i(".tab_nav a"),a=i(".jsTab"),o=i(".details_hero"),n=i(".current-tab-display");a.not(":first").addClass("hidetab"),e.on("click",function(s){s.preventDefault(),s.stopPropagation();var r=i(this),l=this.href;history.pushState({},"",l),e.removeClass("active");var d=0;window.innerWidth<768&&(d=i(".trip_links").height()+17),setTimeout(function(){i('a[href="'+r.attr("href")+'"]').addClass("active"),console.log(i('a[href="'+r.attr("href")+'"]'))}),a.addClass("hidetab").filter(this.getAttribute("href")).removeClass("hidetab"),n.text(r.text()),window.mainVariables.$body.removeClass("mobile_dropdown_show"),t(),window.mainVariables.bLazy.revalidate(),window.mainVariables.mapHandler(["AOSrefresh","voyageMapRefresh","carouselRefresh"]),window.mainVariables.scrollToN(o.height()+o.offset().top+d,500),window.mainVariables.setRedirectUrl()})},historyChange:function(){window.location.hash&&i('.text_link a[href="'+window.location.hash+'"]')&&i('.text_link a[href="'+window.location.hash+'"]').click()},stickyNav:function(i){window.mainVariables.$body.hasClass("no-delay-hero")||window.mainVariables.$body.addClass("no-delay-hero"),this.$navbar.toggleClass("sticky",window.pageYOffset>=this.stickyVars.navTop),window.innerWidth<=767&&(window.pageYOffset>=this.stickyVars.mobileNavCopyTop?this.$navbar.addClass("sticky-interactive"):this.$navbar.removeClass("sticky-interactive")),this.$mapNav.toggleClass("sticky",window.pageYOffset>=this.stickyVars.mapNavTop-this.stickyVars.navHeight&&window.pageYOffset<=this.stickyVars.itineraryTop+this.stickyVars.itineraryHeight)},stickyNavGetSizes:function(t){(t.width()!==this.windowWidth||this.initialResize)&&(this.windowWidth=t.width(),this.initialResize=!1,this.$navbar.length>0&&(this.stickyVars.navTop=i(".details_hero").height()+i(".details_hero").offset().top,this.stickyVars.navHeight=this.$navbar.height()),this.$iteneraryModule.length>0&&(this.stickyVars.itineraryTop=this.$iteneraryModule.offset().top,this.stickyVars.itineraryHeight=this.$iteneraryModule.height()),this.$mapNav.length>0&&(this.stickyVars.mapNavTop=this.$mapNav.offset().top),this.$mobileStickyCopy.length>0&&(this.stickyVars.mobileNavCopyTop=this.$mobileStickyCopy.offset().top+this.$mobileStickyCopy.height()))}},i(".jsDetails").length>0&&Details.initDetails()}(jQuery,window.talonUtil);
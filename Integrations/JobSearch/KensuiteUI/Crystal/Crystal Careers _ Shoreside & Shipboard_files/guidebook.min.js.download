"use strict";function $_GET(e){var t={};return window.location.href.replace(location.hash,"").replace(/[?&]+([^=&]+)=?([^&]*)?/gi,function(e,a,i){t[a]=void 0!==i?i:""}),e?t[e]?t[e]:null:t}!function(e,t){if(window.guidebook={initAcordeon:function(){window.mainVariables.$body.on("click",".guide-acordeon-link",function(t){t.preventDefault();var a=e(this),i=e("#"+a.data("id"));e(".guide-acordeon-content");a.toggleClass("active"),a.parent().find(i).toggleClass("active")})},showContent:function(){window.mainVariables.$body.on("click",".guide-acordeon-content a",function(t){if(!e(t.currentTarget).hasClass("usual_link")){t.preventDefault();var a=e(this),i=a.data("id"),o=e("#"+i);e(".guide-acordeon-content a.active").removeClass("active"),a.addClass("active"),e(".guide-content").hide(),o.show(),e("html, body").animate({scrollTop:e(".guidebook").offset().top},500),window.localStorage.setItem("guidebook-navigate-item",i)}})},copyHeader:function(){var t=e('[data-element="header_place"]').find("h3").text();e('[data-id="header_destination"]').first().text(t)},initiallyOpenSection:function(){var t=window.localStorage.getItem("guidebook-navigate-item"),a=$_GET("list")||(window.localStorage.getItem("guidebook-navigate-list")?window.localStorage.getItem("guidebook-navigate-list").toLowerCase().replace(" ","-"):null),i=$_GET("listitem"),o=location.hash;window.localStorage.setItem("guidebook-navigate-item",""),window.localStorage.setItem("guidebook-navigate-list","");var n=0===e(".link_opened").length;if(t){var l=e('[data-id="'+t+'"]');l.closest(".guide-acordeon-content").prev().click(),l.click()}else if(a)e('.guide-acordeon-link[data-list="'+a+'"]').first().click(),e('.guide-acordeon-link[data-list="'+a+'"]').next().find("a").first().click();else if(i){var d=e('[data-urlname="'+i+'"]');d.closest(".guide-acordeon-content").prev().click(),d.click()}else n&&(e(".guide-acordeon-link").first().click(),e(".guide-acordeon-content a").first().click());var c=e(".guide-content:visible");e(o).length>0&&c&&(e("html, body").animate({scrollTop:e(o).offset().top},500),"false"===e(o).attr("aria-expanded")&&e(o).click()),0===c.length&&n&&(e(".guide-acordeon-link").first().click(),e(".guide-acordeon-content a").first().click())},copyFooter:function(){var t=e(".guide-sidebar-footer .userHtml").html(),a=e(".guide-foot").first();a&&a.append(t)},initLinks:function(){var t=e(".js_guideitem");t.each(function(t,a){var i=e(".single_link",a),o=e("[data-list]",a).data("list")?e("[data-list]",a).data("list"):"",n=e(".guide-view-all>a",a).first();n.attr("data-list",o.toLowerCase().replace(new RegExp(" ","g"),"-")),i.on("click",function(t){t.preventDefault();var a=e(t.currentTarget).data("navigate");window.localStorage.setItem("guidebook-navigate-item",a),window.location.href=n.attr("href")}),n.on("click",function(t){window.localStorage.setItem("guidebook-navigate-list",e(t.currentTarget).data("list"))})})},mergeAcordeons:function(){if(e(".guide-detail").length>1){for(var t=e(".guide-detail"),a=t.first(),i=1;i<t.length;i++){var o=e(t[i]).html();a.append(o),t[i].remove()}for(var n=e(".guide-sidebar"),l=e(".guide-foot"),d=e(".guide-acordeon"),c=d.first(),r=1;r<d.length;r++){o=e(d[r]).html();var s=e(".guide-acordeon-content",c).last();s.after(o),n[r].remove(),l[r].remove(),d[r].remove()}}},initExpandList:function(){var t=e(".expand-list"),a=e('[data-sf-role="expandAll"]',t),i=e('[data-sf-role="collapseAll"]',t),o=e(".item a[data-hold]",t);a.on("click",function(a){t.addClass("open_all").removeClass("close_all"),o.each(function(t,a){"false"===e(a).attr("aria-expanded")&&e(a).click()})}),i.on("click",function(a){t.addClass("close_all").removeClass("open_all"),o.each(function(t,a){"true"===e(a).attr("aria-expanded")&&(e(a).removeClass("active"),e(a).click())})}),o.each(function(t,a){e(a).removeClass("active"),a.setAttribute("aria-expanded","false"),e(a).next().css("display","none"),e(a).on("click",function(t){t.preventDefault(),t.stopImmediatePropagation();var a=e(t.currentTarget),i=e("#"+a.data("target")),o="true"===a.attr("aria-expanded");o?(i.css("display","none"),a.attr("aria-expanded","false")):(i.css("display","table-cell"),a.attr("aria-expanded","true"))})})}},e(".guidebook").length>0&&(guidebook.initLinks(),guidebook.mergeAcordeons(),guidebook.initAcordeon(),guidebook.showContent(),guidebook.copyHeader(),guidebook.copyFooter(),guidebook.initExpandList(),guidebook.initiallyOpenSection(),e(".guide-acordeon-content a").hasClass("active"))){var a=e(".guide-acordeon-content a.active").data("id");e("#"+a).show()}}(jQuery,window.talonUtil);
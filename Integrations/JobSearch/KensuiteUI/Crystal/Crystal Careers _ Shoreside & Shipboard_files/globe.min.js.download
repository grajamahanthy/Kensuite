"use strict";!function(t,e){window.Globe={initGlobe:function(){function e(){t(".view_options a").toggleClass("active"),t(".dest_nav.dest_list").toggleClass("active"),t(".destination_finder").toggleClass("autoheight")}function n(t){t=parseInt(t);var e=90,n=-90,a=70,i=30,s=e-n,o=a-i,r=(t-n)*o/s+i,l=document.getElementById("locatorHolder");l.style.bottom=r+"%"}function a(t){function e(t){var e=t*Math.PI/180;return e}function a(t){var e=t/Math.PI*180;return e}var i,s,o,r,l,c,d,u,v,h=document.getElementById(t.containerId);this.init=function(){if(Detector.webgl){i=!0,s=100,o=new THREE.WebGLRenderer({alpha:!0,antialias:!0}),o.setPixelRatio(window.devicePixelRatio?window.devicePixelRatio:1),o.setSize(h.clientWidth,h.clientWidth),o.setClearColor(16777215,0),h.appendChild(o.domElement),r=new THREE.Scene,l=new THREE.PerspectiveCamera(50,h.clientWidth/h.clientHeight,1,1e3),l.position.set(0,0,146),l.lookAt(0,0,0);var t=new THREE.TextureLoader;t.crossOrigin="use-credentials";var e=t.load("/ResourcePackages/Talon/assets/dist/images/1_earth_2k_sm2.jpg"),n=new THREE.MeshBasicMaterial({map:e});c=new THREE.Mesh(new THREE.SphereGeometry(60,64,48),n);var a=new THREE.AxesHelper(5);r.add(a),r.add(c),u()}else{var d=Detector.getWebGLErrorMessage();document.getElementById("container").appendChild(d)}},this.updatePosition=function(t,a,s,o){switch(o){case"World Cruise":case"Trans-Ocean":case"Northwest Passage":s="true"}var r=document.getElementById("locatorHolder");if("true"===s)i=!0,r.classList.contains("active")&&r.classList.remove("active");else{n(t);var l=270-a,d=5e3;i=!1;var u=new TWEEN.Tween(c.rotation).to({x:e(t),y:e(l)},d).easing(TWEEN.Easing.Exponential.Out).onComplete(function(){});u.start(),setTimeout(function(){r.classList.contains("active")||r.classList.add("active")},3e3)}},this.setAutoRotate=function(t){i=t},this.resize=function(){d(),this.init()},d=function(){cancelAnimationFrame(id),o.domElement.addEventListener("dblclick",null,!1),r=null,l=null,h.innerHTML=""},u=function(){requestAnimationFrame(u);i&&(a(c.rotation.y)<360?c.rotation.y=c.rotation.y+e(.3):c.rotation.y=0),v()},v=function(){TWEEN.update(),o.render(r,l)}}var i=new a({containerId:"globe"});i.init();var s=(t("dest_nav ul"),t(".dest_nav li")),o=t(".text_blurb_wrap"),r=t(".dest_intro"),l=t("body");l.on("click",".dest_nav:not(.dest_list) a",function(e){if(e.preventDefault(),r.removeClass("active"),r.addClass("hide"),t(this).closest("li").hasClass("active"))s.removeClass("active"),o.removeClass("active"),r.addClass("active"),r.removeClass("hide"),t("#surprise").attr("tabindex",0);else{s.removeClass("active"),o.addClass("active"),t(this).closest("li").addClass("active");var n=t(this).closest("li").find(".text_blurb").html();t(o).html(n)}i.updatePosition(t(e.target).data("lat"),t(e.target).data("long"),t(e.target).attr("data-continue-auto-rotation"),t(e.target).text())}),l.on("click","#surprise",function(e){e.preventDefault();var n=Math.floor(Math.random()*t(".dest_nav:not(.dest_list) a:not(.button)").length);t(".dest_nav:not(.dest_list) a:not(.button)")[n].click(),t(".dest_nav:not(.dest_list) a:not(.button)")[n].focus(),t("#surprise").attr("tabindex",-1)}),t(".destination_finder .view_options a").on("click",function(){e()})}}}(jQuery,window.talonUtil);